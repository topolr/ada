<p><a href="https://travis-ci.org/topolr/ada"><img src="https://travis-ci.org/topolr/ada-pack.svg?branch=master" alt="Build Status"></a><a href="https://badge.fury.io/js/ada-pack"><img src="https://badge.fury.io/js/ada-pack.svg" alt="npm version"></a><a href="https://www.npmjs.com/package/ada-pack"><img src="https://img.shields.io/npm/dt/ada-pack.svg?maxAge=2592000" alt="npm"></a><a href="https://github.com/topolr/ada-pack/blob/master/LICENSE"><img src="https://img.shields.io/github/license/topolr/ada-pack.svg?maxAge=2592000" alt="license"></a></p><p>ada专属开箱即用的构建打包工具，它会自动检查源代码并根据代码所使用技术动态引入依赖并部署配置</p><blockquote><p>ada-pack被默认引入ada框架依赖，正常情况下无需单独使用ada-pack</p></blockquote><h2 id="安装ada-pack">安装ada-pack</h2><h3 id="通过npm安装发布的模块">通过npm安装发布的模块</h3><pre><code class="language-javascript">npm install ada-pack --save-dev</code></pre><h2 id="ada-pack 配置文件">ada-pack 配置文件</h2><p>ada-pack配置文件是一个JavaScript文件，比如<code>app.js</code></p><pre><code class="language-javascript">let menu = require(&quot;./src/menu&quot;);
let {File} = require(&quot;ada-util&quot;);
let Path = require(&quot;path&quot;);

let app = {
    siteURL: &quot;/&quot;,
    sourcePath: &quot;./src/&quot;,
    distPath: &quot;./dist/&quot;,
    indexPath: &quot;./dist/index.html&quot;,
    entryPath: &quot;./src/entries/&quot;,
    main: &quot;./src/root.js&quot;,
    staticPath: &quot;./src/static&quot;,
    baseInfo: {
        name: &quot;test&quot;,
        description: &quot;test&quot;,
        icons: [],
        charset: &quot;UTF-8&quot;,
        meta: [
            {name: &#39;viewport&#39;, content: &quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no&quot;},
            {name: &#39;format_detection&#39;, content: &quot;telephone=no&quot;},
            {name: &#39;apple_mobile_web_app_status_bar_style&#39;, content: &quot;white&quot;},
            {name: &#39;apple_mobile_web_app_capable&#39;, content: &quot;yes&quot;}
        ]
    },
    server: {
        proxy: [
            {
                path: &quot;/api/&quot;, option: {
                    target: &#39;http://xxx.xxx.xxx.xxx:xxxx&#39;,
                    changeOrigin: true,
                    pathRewrite: {
                        &#39;^/api/xxx/&#39;: &#39;/xxx/&#39;
                    }
                }
            }
        ]
    },
    indexPaths() {
        return menu.map(item =&gt; item.link);
    },
    entryFiles(config) {
        return new File(Path.resolve(config.sourcePath, &quot;./pages&quot;)).getAllSubFilePaths().then(paths =&gt; {
            return paths.filter(path =&gt; Path.basename(path) === &quot;index.js&quot;);
        });
    }
};
module.exports = app;</code></pre><h2 id="默认配置">默认配置</h2><pre><code class="language-javascript">module.exports = {
    basePath: &quot;/&quot;,
    sourcePath: &quot;./src/&quot;,
    distPath: &quot;./dist/&quot;,
    indexPath: &quot;./dist/index.html&quot;,
    siteURL: &quot;/&quot;,
    main: &quot;./src/root.js&quot;,
    initer: &quot;&quot;,
    worker: {
        scope: &quot;/&quot;,
        path: &quot;&quot;
    },
    entryPath: &quot;./src/entries&quot;,
    staticPath: &quot;./src/static&quot;,
    entryFiles() {
        return [];
    },
    ignore: [],
    baseInfo: {
        name: &quot;ada&quot;,
        icons: [],
        short_name: &quot;ada&quot;,
        start_url: &quot;/&quot;,
        display: &quot;standalone&quot;,
        background_color: &quot;#fff&quot;,
        theme_color: &quot;#fff&quot;,
        description: &quot;ada web framework.&quot;,
        related_applications: [{&quot;platform&quot;: &quot;web&quot;}],
        keywords: &quot;&quot;,
        charset: &quot;UTF-8&quot;,
        meta: [
            {name: &#39;viewport&#39;, content: &quot;width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no&quot;},
            {name: &#39;format_detection&#39;, content: &quot;telephone=no&quot;},
            {name: &#39;apple_mobile_web_app_status_bar_style&#39;, content: &quot;white&quot;},
            {name: &#39;apple_mobile_web_app_capable&#39;, content: &quot;yes&quot;}
        ],
        link: [],
        style: [],
        script: []
    },
    dependence: {
        js: {
            dependence: {
                &quot;uglify-es&quot;: &quot;^3.3.8&quot;,
                &quot;@babel/cli&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/core&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/runtime-corejs2&quot;: &quot;^7.1.2&quot;,
                &quot;@babel/plugin-proposal-class-properties&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/plugin-proposal-decorators&quot;: &quot;^7.0.0-beta.52&quot;,
                &quot;@babel/plugin-proposal-do-expressions&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/plugin-proposal-function-bind&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/plugin-proposal-object-rest-spread&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/plugin-syntax-dynamic-import&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/plugin-syntax-export-extensions&quot;: &quot;^7.0.0-beta.32&quot;,
                &quot;@babel/plugin-transform-async-to-generator&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/plugin-transform-runtime&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/polyfill&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/preset-env&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/preset-typescript&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/register&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/runtime&quot;: &quot;^7.0.0&quot;,
                &quot;express&quot;: &quot;&quot;
            },
            maker: &quot;./maker/jsmaker&quot;
        },
        css: {
            dependence: {
                &quot;autoprefixer&quot;: &quot;^7.1.6&quot;,
                &quot;postcss&quot;: &quot;^5.2.5&quot;,
                &quot;uglifycss&quot;: &quot;^0.0.25&quot;,
                &quot;html-minifier&quot;: &quot;^3.5.6&quot;
            },
            maker: &quot;./maker/cssmaker&quot;
        },
        scss: {
            dependence: {
                &quot;autoprefixer&quot;: &quot;^7.1.6&quot;,
                &quot;postcss&quot;: &quot;^5.2.5&quot;,
                &quot;uglifycss&quot;: &quot;^0.0.25&quot;,
                &quot;node-sass&quot;: &quot;^3.10.1&quot;,
                &quot;html-minifier&quot;: &quot;^3.5.6&quot;
            },
            maker: &quot;./maker/sassmaker&quot;
        },
        less: {
            dependence: {
                &quot;autoprefixer&quot;: &quot;^7.1.6&quot;,
                &quot;postcss&quot;: &quot;^5.2.5&quot;,
                &quot;uglifycss&quot;: &quot;^0.0.25&quot;,
                &quot;less&quot;: &quot;^2.7.1&quot;,
                &quot;html-minifier&quot;: &quot;^3.5.6&quot;
            },
            maker: &quot;./maker/lessmaker&quot;
        },
        json: {
            dependence: {},
            maker: &quot;./maker/jsonmaker&quot;
        },
        html: {
            dependence: {
                &quot;html-minifier&quot;: &quot;^3.5.6&quot;
            },
            maker: &quot;./maker/htmlmaker&quot;
        },
        icon: {
            dependence: {
                &quot;html-minifier&quot;: &quot;^3.5.6&quot;
            },
            maker: &quot;./maker/iconmaker&quot;
        },
        ts: {
            dependence: {
                &quot;typescript&quot;: &quot;^2.6.2&quot;,
                &quot;uglify-es&quot;: &quot;^3.3.8&quot;,
                &quot;@babel/cli&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/core&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/runtime-corejs2&quot;: &quot;^7.1.2&quot;,
                &quot;@babel/plugin-proposal-class-properties&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/plugin-proposal-decorators&quot;: &quot;^7.0.0-beta.52&quot;,
                &quot;@babel/plugin-proposal-do-expressions&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/plugin-proposal-function-bind&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/plugin-proposal-object-rest-spread&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/plugin-syntax-dynamic-import&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/plugin-syntax-export-extensions&quot;: &quot;^7.0.0-beta.32&quot;,
                &quot;@babel/plugin-transform-async-to-generator&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/plugin-transform-runtime&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/polyfill&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/preset-env&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/preset-typescript&quot;: &quot;^7.1.0&quot;,
                &quot;@babel/register&quot;: &quot;^7.0.0&quot;,
                &quot;@babel/runtime&quot;: &quot;^7.0.0&quot;,
            },
            maker: &quot;./lib/maker/tsmaker&quot;
        }
    },
    compiler: {
        babel: {
            presets: [
                &quot;@babel/typescript&quot;, [&quot;@babel/env&quot;, {&quot;targets&quot;: {&quot;chrome&quot;: &quot;59&quot;}}]
            ],
            plugins: [
                [&quot;@babel/plugin-transform-runtime&quot;, {
                    &quot;helpers&quot;: false,
                    &quot;regenerator&quot;: true
                }],
                [&quot;@babel/plugin-proposal-decorators&quot;, {&quot;legacy&quot;: true}],
                [&quot;@babel/plugin-proposal-class-properties&quot;, {&quot;loose&quot;: true}],
                &quot;@babel/transform-async-to-generator&quot;,
                &quot;@babel/plugin-syntax-dynamic-import&quot;,
                &quot;@babel/plugin-proposal-function-bind&quot;,
                &quot;@babel/plugin-syntax-export-extensions&quot;,
                &quot;@babel/plugin-proposal-do-expressions&quot;,
                &quot;@babel/plugin-proposal-object-rest-spread&quot;
            ]
        },
        uglify: {},
        uglifycss: {},
        postcss: [
            {autoprefixer: {}}
        ],
        sass: {},
        minifier: {},
        typescript: [&quot;--target ESNext&quot;, &quot;--noEmit&quot;, &quot;--pretty&quot;, &quot;--skipLibCheck&quot;, &quot;--experimentalDecorators&quot;]
    },
    server: {
        protocol: &quot;http&quot;,
        host: &quot;localhost&quot;,
        port: &quot;8080&quot;,
        serverPath: &quot;./server.js&quot;,
        proxy: null
    },
    hook: [],
    ssr: {
        urls: [],
        output: &quot;&quot;
    },
    indexPaths() {
        return []
    }
};</code></pre><h2 id="package.json">package.json</h2><p>除了以上的配置还有两个默认配置，如果需要修改这个配置，需要修改<code>package.json</code>文件。</p><pre><code class="language-javascript">{
  &quot;name&quot;: &quot;xxx&quot;,
  &quot;scripts&quot;: {
    &quot;ada&quot;: &quot;node node_modules/adajs/bin/cli&quot;,
    &quot;pack&quot;: &quot;node node_modules/ada-pack/bin/cli&quot;,
    &quot;dev&quot;: &quot;node node_modules/ada-pack/bin/cli dev&quot;,
    &quot;start&quot;: &quot;node node_modules/ada-pack/bin/cli start&quot;,
    &quot;publish&quot;: &quot;node node_modules/ada-pack/bin/cli publish&quot;
  },
  &quot;ada&quot;: {
    &quot;develop&quot;: &quot;./app/app.js&quot;,
    &quot;publish&quot;: &quot;./app/app.js&quot;
  },
  &quot;dependencies&quot;: {
    &quot;adajs&quot;: &quot;^3.0.0-beta.22&quot;
  },
  &quot;devDependencies&quot;: {}
}
</code></pre>
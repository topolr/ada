"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_dec4,_class,_class2,_adajs=require("adajs"),_state=_interopRequireDefault(require("site/reply/state.js")),_toast=_interopRequireDefault(require("node_modules/ada-uikit/src/toast/index.js")),_loading=_interopRequireDefault(require("node_modules/ada-uikit/src/loading/index.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _applyDecoratedDescriptor(e,t,s,a,r){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,a){return a(e,t,s)||s},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let Reply=(_dec=(0,_adajs.view)({className:"reply",template:"site/reply/template.html",style:"site/reply/style.scss",dataset:{service:_state.default},module:"site/reply/index.js"}),_dec2=(0,_adajs.binder)("close"),_dec3=(0,_adajs.binder)("login"),_dec4=(0,_adajs.binder)("reply"),_dec((_applyDecoratedDescriptor((_class2=class extends _adajs.BondViewGroup{oncreated(){setTimeout(()=>{this.className.add("open")})}close(){this.closePannel()}login(){this.dispatchEvent("login")}reply(){let e=this.finder("input").getElement().innerHTML;e.trim().length>0?this.addChild(_loading.default).then(t=>{this.commit("reply",e).then(()=>{t.showSuccess(),t.close(),setTimeout(()=>{this.closePannel(),this.dispatchEvent("commentdone")},2e3)})}):this.addChild(_toast.default,{parameter:{content:"reply content can not empty"}})}closePannel(){this.className.remove("open"),setTimeout(()=>{this.dispatchEvent("closereply")},500)}}).prototype,"close",[_dec2],Object.getOwnPropertyDescriptor(_class2.prototype,"close"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"login",[_dec3],Object.getOwnPropertyDescriptor(_class2.prototype,"login"),_class2.prototype),_applyDecoratedDescriptor(_class2.prototype,"reply",[_dec4],Object.getOwnPropertyDescriptor(_class2.prototype,"reply"),_class2.prototype),_class=_class2))||_class);var _default=Reply;exports.default=_default;